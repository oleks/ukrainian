<!DOCTYPE>
<html>
<head>
<meta charset="utf-8"/>
<title>Wheel of fortune!</title>
<style>
  html, body { margin: 0; background: white; font-family:helvetica }
  body { position: absolute; top:35%; width: 100% }
  input[type=button] { font-size:20px; width:35px; height:35px; margin:2px }
  #audio { width:300px; margin:50px auto }
  audio { width:300px; height: 30px }
  #answers { width:1250px; margin:0 auto }
</style>
</head>
<body>
<div id="audio"><br/></div>
<div id="answers"></div>
<script type="text/javascript">
function shuffle(arr) {
  var shuffled = arr.slice(0); // Copy

  // Fisher-Yates
  for (var i = shuffled.length - 1; i > 1; --i) {
    j = Math.floor(Math.random() * i);
    var x = shuffled[i];
    shuffled[i] = shuffled[j];
    shuffled[j] = x;
  }
  return shuffled;
};

var sorted_alphabet = [
  "А","Б","В","Г","Ґ","Д","Е","Є","Ж","З","И","І","Ї","Й","К","Л","М","Н","О",
  "П","Р","С","Т","У","Ф","Ц","Ч","Ш","Щ","Ь","Ю","Я"];

var alphabet = shuffle(sorted_alphabet);

var audio = document.getElementById("audio");
var audiosrc = document.getElementById("audiosrc");
var answers = document.getElementById("answers");

for (var i = 0; i < sorted_alphabet.length; ++i) {
  var letter = sorted_alphabet[i];
  var answer = document.createElement("input");
  answer.setAttribute("onclick", "guess(\"" + letter + "\");");
  answer.setAttribute("type", "button");
  answer.setAttribute("value", letter);
  answers.appendChild(answer);
}

var current = 0;
var score = 0;

function show() {
  var audioElement = document.createElement("audio");
  audioElement.setAttribute("controls", "");
  var audioSourceElement = document.createElement("source");
  audioSourceElement.setAttribute("type", "audio/ogg");
  audioSourceElement.setAttribute("src",
    "audio/Uk-ua-male-alphabet-" + alphabet[current] + ".ogg");
  audioElement.appendChild(audioSourceElement);
  audio.appendChild(audioElement);
  audio.removeChild(audio.firstChild);
}

function guess(letter) {
  if (letter == alphabet[current]) {
    ++score;
  }

  ++current;
  if (current === alphabet.length) {
    var pct = score / alphabet.length * 100;
    alert(pct + "%");
    location.reload();
  } else {
    show();
  }
}

show();
</script>
</body>
</html>
